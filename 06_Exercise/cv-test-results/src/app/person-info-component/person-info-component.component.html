<div class="container-fluid">
    <div class="columns-block container">

        <h1>Enter persons info</h1>
        <form (ngSubmit)="enterInfo(personForm)" #personForm="ngForm">
            <div class="row">
                <div class="form-group col-md-4">
                    <label for="firstName">First name</label>
                    <input required type="text" class="form-control" ngModel #firstName="ngModel" name="firstName" 
                        placeholder="Insert first name..." pattern="[A-Z][a-z]{3,15}">
                    <div class="error" *ngIf="firstName.invalid && (firstName.dirty || message)">
                        <div *ngIf="firstName.hasError('required')">
                            Frist name is required.
                        </div>
                        <div *ngIf="firstName.hasError('pattern')">
                            Frist name is pattern wrong.
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-4">
                    <label for="lastName">Last name</label>
                    <input required type="text" class="form-control" ngModel #lastName="ngModel" name="lastName" 
                        placeholder="Insert last name..." pattern="[A-Z][a-z]{3,15}">
                    <div class="error" *ngIf="lastName.invalid && (lastName.dirty || message)">
                        <div *ngIf="lastName.hasError('required')">
                            Last name is required.
                        </div>
                        <div *ngIf="lastName.hasError('pattern')">
                            Last name is pattern wrong.
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-4">
                    <label for="imageURL">Image URL</label>
                    <input type="text" class="form-control" ngModel #imageURL="ngModel" name="imageURL" placeholder="Insert image URL..."
                        pattern="https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)">
                        <div class="error" *ngIf="imageURL.hasError('pattern')">
                            Image URL is pattern wrong.
                        </div>
                    </div>
            </div>

            <div class="row">
                <div class="form-group col-md-4">
                    <label for="email">E-mail</label>
                    <input required type="email" class="form-control" #email="ngModel" ngModel name="email" placeholder="Insert e-mail..."
                        pattern="^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$">
                    <div class="error" *ngIf="email.invalid && (email.dirty || message)">
                        <div *ngIf="email.hasError('required')">
                            E-mail is required.
                        </div>
                        <div *ngIf="email.hasError('pattern')">
                            E-mail is pattern wrong.
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-4">
                    <label for="linkedIn">LinkedIn profile URL</label>
                    <input required type="text" class="form-control" #linkedIn="ngModel" ngModel name="linkedIn" placeholder="Insert LinkedIn..."
                        pattern="(https://)?www.linkedin.com/in/[a-z]*-[a-z]*-[a-z0-9]*/?">
                    <div class="error" *ngIf="linkedIn.invalid && (linkedIn.dirty || message)">
                        <div *ngIf="linkedIn.hasError('required')">
                            LinkedIn profile URL is required.
                        </div>
                        <div *ngIf="linkedIn.hasError('pattern')">
                            LinkedIn profile URL is pattern wrong.
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-4">
                    <label for="jobTittle">Job tittle</label>
                    <input required type="text" class="form-control" #jobTittle="ngModel" ngModel name="jobTittle" 
                        placeholder="Insert job tittle..." pattern="[A-Za-z ]*">
                    <div class="error" *ngIf="jobTittle.invalid && (jobTittle.dirty || message)">
                        <div *ngIf="jobTittle.hasError('required')">
                            Job tittle is required.
                        </div>
                        <div *ngIf="jobTittle.hasError('pattern')">
                            Job tittle is pattern wrong.
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="inputAddress">Address line 1 (format: Strazilovska 6, Novi Sad)</label>
                <input required type="text" class="form-control" #address1="ngModel" ngModel name="address1" 
                    placeholder="Insert address line 1" pattern="([A-Z][a-z ]*)*[0-9]*[a-z]?, ([A-Z][a-z ]*)*"> 
                <div class="error" *ngIf="address1.invalid && (address1.dirty || message)">
                    <div *ngIf="jobTittle.hasError('required')">
                        Address line 1 is required.
                    </div>
                    <div *ngIf="jobTittle.hasError('pattern')">
                        Address line 1 is pattern wrong.
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="inputAddress2">Address line 2</label>
                <input type="text" class="form-control" ngModel #address2="ngModel" name="address2" placeholder="Insert address line 2"
                    pattern="([A-Z][a-z ]*)*[0-9]*[a-z]?, ([A-Z][a-z ]*)*">
                    <div class="error" *ngIf="address2.hasError('pattern')">
                        Address line 2 is pattern wrong.
                    </div>
            </div>

            <div class="form-group">
                <label for="summary">Summary</label>
                <textarea required class="form-control" ngModel #summary="ngModel" name="summary" rows="3"></textarea>
                <div class="error" *ngIf="summary.invalid && (summary.dirty || message)">
                    Summary is required.
                </div>
            </div>

            <div class="row">
                <div class="form-group col-md-6">
                    <label for="skill1">Skill 1</label>
                    <input required type="text" class="form-control" ngModel #skill1="ngModel" name="skills[0].name" placeholder="Insert skill...">
                    <div class="error" *ngIf="skill1.invalid && (skill1.dirty || message)">
                        Skill 1 is required.
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label for="knowledge1">Knowledge</label>
                    <input required type="number" class="form-control" ngModel #knowledge1="ngModel" name="skills[0].knowledge" placeholder="Insert knowledge...">
                    <div class="error" *ngIf="knowledge1.invalid && (knowledge1.dirty || message)">
                        Knowledge 1 is required.
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="form-group col-md-6">
                    <label for="skill2">Skill 2</label>
                    <input required type="text" class="form-control" ngModel #skill2="ngModel" name="skills[1].name" placeholder="Insert skill...">
                    <div class="error" *ngIf="skill2.invalid && (skill2.dirty || message)">
                        Skill 2 is required.
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label for="knowledge2">Knowledge</label>
                    <input required type="number" class="form-control" ngModel #knowledge2="ngModel" name="skills[1].knowledge" placeholder="Insert knowledge...">
                    <div class="error" *ngIf="knowledge2.invalid && (knowledge2.dirty || message)">
                        Knowledge 2 is required.
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="form-group col-md-6">
                    <label for="skill3">Skill 3</label>
                    <input required type="text" class="form-control" ngModel #skill3="ngModel" name="skills[2].name" placeholder="Insert skill...">
                    <div class="error" *ngIf="skill3.invalid && (skill3.dirty || message)">
                        Skill 3 is required.
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label for="knowledge3">Knowledge</label>
                    <input required type="number" class="form-control" ngModel #knowledge3="ngModel" name="skills[2].knowledge" placeholder="Insert knowledge...">
                    <div class="error" *ngIf="knowledge3.invalid && (knowledge3.dirty || message)">
                        Knowledge 3 is required.
                    </div>
                </div>
            </div>
            
            <br>
            <button type="submit" class="btn btn-primary">Add</button>
        </form>
        <div class="message">
            {{message}}
        </div>
        
    </div>
</div>


<hr>

<body *ngIf="!message && person !== undefined">
    <div class="columns-block container">
        <div class="content">
            <div class="row">
                <div class="col-md-6">
                    <h1>{{person.firstName}} {{person.lastName}}</h1>
                    <span>{{person.jobTittle}}</span>
                </div>

                <div class="col-md-6">
                    <img src="{{person.imageURL}}" class="img-responsive">
                </div>
            </div>
        </div>

        <div>
            <p>
                {{person.summary}}
            </p>
        </div>

        <div class="container-fluid">
            <div class="row">
                <div class="col-md-12">
                    <h2>Skills</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12" *ngFor="let skill of person.skills">
                    <span>{{skill.name}}</span>
                    <span>{{skill.knowledge}}</span>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" [attr.aria-valuenow]="skill.knowledge"
                            aria-valuemin="0" aria-valuemax="100" [style.width]="skill.knowledge + '%'"></div>
                    </div>
                </div>
            </div>
        </div>

        <hr>

        <div class="container-fluid">
            <div class="row">
                <div class="col-md-12">
                    <h2>Contact</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <address>
                        <strong>Address</strong><br>
                        {{person.address1}}<br>
                        {{person.address2}}
                    </address>
                    <address>
                        <strong>E-mail</strong><br>
                        <a href="mailto:{{person.email}}">{{person.email}}</a>
                    </address>
                    <address>
                        <a href="{{person.linkedIn}}">
                            <button type="button" class="btn btn-outline-secondary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="16" fill="currentColor"
                                    class="bi bi-linkedin" viewBox="0 0 16 16">
                                    <path
                                        d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z">
                                    </path>
                                </svg>
                                <span class="visually">{{person.firstName}} {{person.lastName}}</span>
                            </button>
                        </a>

                    </address>
                </div>
            </div>
        </div>

    </div>
</body>